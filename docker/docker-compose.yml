version: '3.8'

services:
  config-flow:
    image: thsrite/config-flow:latest
    # 如果要使用本地构建，请注释上一行并取消下面的注释
    # build:
    #   context: ..
    #   dockerfile: docker/Dockerfile
    container_name: config-flow
    ports:
      - "5010:80"
    volumes:
      # 挂载数据目录以持久化配置（不包含应用代码）
      - ./data:/data
    restart: unless-stopped
    environment:
      - DATA_DIR=/data
      # 登录认证配置（生产环境必需，请修改默认密码和密钥）
      # 本地开发可以设置 SKIP_AUTH_CHECK=true 跳过认证
      - ADMIN_USERNAME=admin
      - ADMIN_PASSWORD=admin123
      - JWT_SECRET_KEY=your-secret-key-please-change-in-production  # 必须修改为唯一的密钥
      # - SKIP_AUTH_CHECK=true  # 取消注释以禁用认证（仅用于开发测试）